<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Random — Leaderboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="wrap">
    <div class="title">
      <h1>🏆 The Random (Remastered)</h1>
      <p class="sub">랭킹 · 최근 기록 · 통계</p>
    </div>
    <div class="actions">
      <button id="btnRefresh">새로고침</button>
    </div>
  </header>

  <main class="wrap grid">
    <!-- 명예의 전당 -->
    <section class="card" id="hofCard">
      <h2>👑 명예의 전당</h2>
      <div class="hof">
        <div>
          <div class="label">1등</div>
          <div class="value" id="hofName">-</div>
        </div>
        <div class="mini">
          <div class="label">최고 시도</div>
          <div class="value" id="hofAttempts">-</div>
        </div>
        <div class="mini">
          <div class="label">최고 시간</div>
          <div class="value" id="hofTime">-</div>
        </div>
      </div>
    </section>

    <!-- 전체 통계 -->
    <section class="card">
      <h2>📊 전체 통계</h2>
      <div class="stats">
        <div class="stat">
          <div class="label">총 플레이</div>
          <div class="value" id="statPlays">-</div>
        </div>
        <div class="stat">
          <div class="label">총 승리</div>
          <div class="value" id="statWins">-</div>
        </div>
        <div class="stat">
          <div class="label">평균 시도(승리)</div>
          <div class="value" id="statAvgWinAttempts">-</div>
        </div>
      </div>
      <p class="hint">※ 평균 시도는 최근 로그(승리) 기준으로 계산</p>
    </section>

    <!-- 오늘 TOP10 -->
    <section class="card full">
      <div class="row">
        <h2>📅 오늘 TOP 10</h2>
        <span class="badge" id="todayDate">-</span>
      </div>
      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>닉네임</th>
              <th>시도</th>
              <th>시간(s)</th>
            </tr>
          </thead>
          <tbody id="todayTbody">
            <tr><td colspan="4" class="muted">데이터 로딩 중...</td></tr>
          </tbody>
        </table>
      </div>
      <p class="hint">※ 오늘 승리 로그(updown_game_logs) 기준</p>
    </section>

    <!-- 난이도별 -->
    <section class="card full">
      <div class="row">
        <h2>🎚️ 난이도별 TOP 10</h2>
        <div class="tabs">
          <button class="tab active" data-diff="쉬움">쉬움</button>
          <button class="tab" data-diff="보통">보통</button>
          <button class="tab" data-diff="어려움">어려움</button>
        </div>
      </div>

      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>닉네임</th>
              <th>시도</th>
              <th>시간(s)</th>
            </tr>
          </thead>
          <tbody id="diffTbody">
            <tr><td colspan="4" class="muted">탭을 선택하세요</td></tr>
          </tbody>
        </table>
      </div>
      <p class="hint">※ 난이도별 승리 로그 기준</p>
    </section>

    <!-- 전체 TOP10(플레이어 요약) -->
    <section class="card full">
      <h2>🏅 전체 TOP 10</h2>
      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>닉네임</th>
              <th>최고 시도</th>
              <th>최고 시간(s)</th>
              <th>승/판</th>
            </tr>
          </thead>
          <tbody id="overallTbody">
            <tr><td colspan="5" class="muted">데이터 로딩 중...</td></tr>
          </tbody>
        </table>
      </div>
      <p class="hint">※ updown_players 기준</p>
    </section>

    <!-- 최근 10게임 로그 -->
    <section class="card full">
      <h2>🧾 최근 10게임 로그</h2>
      <div class="tableWrap">
        <table>
          <thead>
            <tr>
              <th>시간(KST)</th>
              <th>닉네임</th>
              <th>결과</th>
              <th>시도</th>
              <th>시간(s)</th>
              <th>난이도</th>
            </tr>
          </thead>
          <tbody id="recentTbody">
            <tr><td colspan="6" class="muted">데이터 로딩 중...</td></tr>
          </tbody>
        </table>
      </div>
      <p class="hint">※ updown_game_logs 최신순</p>
    </section>

    <section class="card full">
      <h2>ℹ️ 안내</h2>
      <ul class="bullets">
        <li>이 페이지는 Firestore에서 <b>읽기만</b> 합니다.</li>
        <li>닉네임은 랭킹에 그대로 노출되므로, 실명 대신 닉네임 사용을 권장합니다.</li>
      </ul>
      <div class="error" id="errBox" style="display:none;"></div>
    </section>
  </main>

  <footer class="wrap foot">
    <span>© The Random</span>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
